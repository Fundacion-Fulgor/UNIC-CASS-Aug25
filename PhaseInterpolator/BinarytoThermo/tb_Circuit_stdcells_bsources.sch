v {xschem version=3.4.8RC file_version=1.2}
G {}
K {}
V {}
S {}
F {}
E {}
N 150 -30 180 -30 {lab=vo_s1t}
N 180 -230 180 -30 {lab=vo_s1t}
N 150 -10 220 -10 {lab=vo_s2t}
N 220 -80 220 -10 {lab=vo_s2t}
N 150 10 220 10 {lab=vo_s3t}
N 150 30 180 30 {lab=vo_s4t}
N 590 -230 660 -230 {lab=avss}
N 660 80 660 230 {lab=avss}
N 590 230 660 230 {lab=avss}
N 590 80 660 80 {lab=avss}
N 590 -80 660 -80 {lab=avss}
N 660 -230 660 -80 {lab=avss}
N 805 -160 805 -140 {lab=GND}
N 805 -240 805 -220 {lab=avss}
N 940 -165 940 -145 {lab=avss}
N 720 275 720 295 {lab=avss}
N 1095 275 1095 295 {lab=avss}
N 660 -20 660 80 {lab=avss}
N 660 -20 680 -20 {lab=avss}
N 660 -80 660 -20 {lab=avss}
N 0 -120 0 -100 {lab=avdd}
N -170 -40 -150 -40 {lab=vs4}
N 215 -240 215 -230 {lab=vo_s1t}
N 245 -95 245 -80 {lab=vo_s2t}
N 245 65 245 80 {lab=vo_s3t}
N 220 220 220 230 {lab=vo_s4t}
N 180 230 220 230 {lab=vo_s4t}
N -170 40 -150 40 {lab=vs3}
N 220 10 220 80 {lab=vo_s3t}
N 180 30 180 230 {lab=vo_s4t}
N 0 100 0 120 {lab=avss}
N 215 -230 290 -230 {lab=vo_s1t}
N 180 -230 215 -230 {lab=vo_s1t}
N 245 -80 290 -80 {lab=vo_s2t}
N 220 -80 245 -80 {lab=vo_s2t}
N 245 80 290 80 {lab=vo_s3t}
N 220 80 245 80 {lab=vo_s3t}
N 220 230 290 230 {lab=vo_s4t}
N 360 310 400 310 {lab=avss}
N 360 150 400 150 {lab=avss}
N 360 -10 390 -10 {lab=avss}
N 360 -160 400 -160 {lab=avss}
N 335 -310 360 -310 {lab=avdd}
N 360 -310 360 -280 {lab=avdd}
N 325 -150 360 -150 {lab=avdd}
N 360 -150 360 -130 {lab=avdd}
N 325 10 360 10 {lab=avdd}
N 360 10 360 30 {lab=avdd}
N 325 160 360 160 {lab=avdd}
N 360 160 360 180 {lab=avdd}
N 480 -230 530 -230 {lab=#net1}
N 480 80 530 80 {lab=#net2}
N 480 230 530 230 {lab=#net3}
N 480 -80 530 -80 {lab=#net4}
N 940 -270 940 -220 {lab=avdd}
N 360 -180 360 -160 {lab=avss}
N 360 -30 360 -10 {lab=avss}
N 360 130 360 150 {lab=avss}
N 360 280 360 310 {lab=avss}
N 940 275 940 295 {lab=avss}
N 1095 170 1095 215 {lab=vs6}
N 940 140 940 215 {lab=vcontrol}
N 1085 140 1310 140 {lab=vcontrol}
N 720 110 720 215 {lab=#net5}
N 720 110 1240 110 {lab=#net5}
N 1165 170 1240 170 {lab=vs6}
N 1165 170 1165 185 {lab=vs6}
N 1095 170 1165 170 {lab=vs6}
N 1310 140 1310 180 {lab=vcontrol}
N 1240 170 1240 220 {lab=vs6}
N 1240 220 1280 220 {lab=vs6}
N 1240 50 1240 110 {lab=#net5}
N 1240 50 1280 50 {lab=#net5}
N 1340 50 1360 50 {lab=vs3}
N 1360 140 1360 220 {lab=vs3}
N 1340 220 1360 220 {lab=vs3}
N 1360 140 1415 140 {lab=vs3}
N 1360 50 1360 140 {lab=vs3}
N 1330 90 1330 100 {lab=avss}
N 1330 100 1395 100 {lab=avss}
N 1290 160 1290 180 {lab=avss}
N 1290 160 1330 160 {lab=avss}
N 1330 100 1330 160 {lab=avss}
N 1050 140 1050 165 {lab=vcontrol}
N 940 140 1050 140 {lab=vcontrol}
N 1155 -130 1155 -115 {lab=avdd}
N 1155 -15 1155 10 {lab=avss}
N 1085 -65 1085 140 {lab=vcontrol}
N 1050 140 1085 140 {lab=vcontrol}
N 1275 90 1310 90 {lab=#net6}
N 1275 -65 1275 90 {lab=#net6}
N 720 775 720 795 {lab=avss}
N 1095 775 1095 795 {lab=avss}
N 940 775 940 795 {lab=avss}
N 1095 670 1095 715 {lab=vs5}
N 940 640 940 715 {lab=#net7}
N 1085 640 1310 640 {lab=#net7}
N 720 610 720 715 {lab=#net8}
N 720 610 1240 610 {lab=#net8}
N 1165 670 1240 670 {lab=vs5}
N 1165 670 1165 685 {lab=vs5}
N 1095 670 1165 670 {lab=vs5}
N 1310 640 1310 680 {lab=#net7}
N 1240 670 1240 720 {lab=vs5}
N 1240 720 1280 720 {lab=vs5}
N 1240 550 1240 610 {lab=#net8}
N 1240 550 1280 550 {lab=#net8}
N 1340 550 1360 550 {lab=vs4}
N 1360 640 1360 720 {lab=vs4}
N 1340 720 1360 720 {lab=vs4}
N 1360 640 1415 640 {lab=vs4}
N 1360 550 1360 640 {lab=vs4}
N 1330 590 1330 600 {lab=avss}
N 1330 600 1395 600 {lab=avss}
N 1290 660 1290 680 {lab=avss}
N 1290 660 1330 660 {lab=avss}
N 1330 600 1330 660 {lab=avss}
N 940 640 1085 640 {lab=#net7}
N 1155 370 1155 385 {lab=avdd}
N 1155 485 1155 510 {lab=avss}
N 1085 435 1085 640 {lab=#net7}
N 1275 590 1310 590 {lab=#net9}
N 1275 435 1275 590 {lab=#net9}
C {capa.sym} 560 -230 3 0 {name=C1
m=1
value=1p
footprint=1206
device="ceramic capacitor"}
C {capa.sym} 560 -80 3 0 {name=C2
m=1
value=1p
footprint=1206
device="ceramic capacitor"}
C {capa.sym} 560 80 3 0 {name=C3
m=1
value=1p
footprint=1206
device="ceramic capacitor"}
C {capa.sym} 560 230 3 0 {name=C4
m=1
value=1p
footprint=1206
device="ceramic capacitor"}
C {vsource.sym} 805 -190 0 0 {name=V1 value=DC\{vss\} savecurrent=false}
C {gnd.sym} 805 -140 0 0 {name=l1 lab=GND}
C {lab_pin.sym} 805 -240 1 0 {name=p1 sig_type=std_logic lab=avss}
C {vsource.sym} 940 -195 0 0 {name=V2 value=DC\{vdd\} savecurrent=false}
C {lab_pin.sym} 335 -310 0 0 {name=p2 sig_type=std_logic lab=avdd}
C {lab_pin.sym} 940 -145 3 0 {name=p3 sig_type=std_logic lab=avss}
C {lab_pin.sym} 1415 140 2 0 {name=p4 sig_type=std_logic lab=vs3}
C {lab_pin.sym} 720 295 3 0 {name=p5 sig_type=std_logic lab=avss}
C {vsource.sym} 1095 245 0 0 {name=V4 value="DC=\{vdd\} AC 0" savecurrent=false}
C {lab_pin.sym} 1095 295 3 0 {name=p7 sig_type=std_logic lab=avss}
C {lab_pin.sym} 680 -20 2 0 {name=p16 sig_type=std_logic lab=avss}
C {lab_pin.sym} 0 -120 2 0 {name=p17 sig_type=std_logic lab=avdd}
C {lab_pin.sym} -170 40 0 0 {name=p18 sig_type=std_logic lab=vs3}
C {lab_pin.sym} -170 -40 0 0 {name=p19 sig_type=std_logic lab=vs4}
C {lab_pin.sym} 215 -240 1 0 {name=p20 sig_type=std_logic lab=vo_s1t}
C {netlist_not_shown.sym} -245 -295 0 0 {name=SIMULATION only_toplevel=false

value="

* Circuit Parameters
.param vdd = 1.2
.param vss = 0.0
.param a=0
.param b=0
.param c=0
.param d=0
.param Tclk = 500n
.options TEMP = 65.0

* Include Models
.lib /foss/pdks/ihp-sg13g2/libs.tech/ngspice/models/cornerMOSlv.lib mos_tt
.lib /foss/pdks/ihp-sg13g2/libs.tech/ngspice/models/cornerMOShv.lib mos_tt
.lib /foss/pdks/ihp-sg13g2/libs.tech/ngspice/models/cornerHBT.lib hbt_typ
.lib /foss/pdks/ihp-sg13g2/libs.tech/ngspice/models/cornerRES.lib res_typ


* OP Parameters & Singals to save
.save all

*Simulations
.control
	* Desde (s3,s4)=00 a 01
	alter V3=1.2
	alter V8=1.2
	alter V4=0
	dc V7 0 1.2 0.001
	setplot dc1
	plot vs3 vs4 vo_s3t ylabel vout xlabel vin
	set filetype = ascii
	write dc00to01.raw V(vo_s3t) V(vs3) V(vs4)
	* Desde (s3,s4)=00 a 10
	reset 
	alter V3=1.2
	alter V8=1.2
	alter V7=0
	dc V4 0 1.2 0.001
	setplot dc2
	plot vs3 vs4 vo_s2t vo_s3t ylabel vout xlabel vin
	set filetype = ascii
	write dc00to10.raw V(vo_s2t) V(vo_s3t) V(vs3) V(vs4)
	* Desde (s3,s4)=00 a 11
	alterparam b = 1
	reset
	alter V3=0
	alter V8=1.2
	dc V7 0 1.2 0.001
	setplot dc3
	plot vs3 vs4 vo_s1t vo_s2t vo_s3t ylabel vout xlabel vin
	set filetype = ascii
	write dc00to11.raw V(vo_s1t) V(vo_s2t) V(vo_s3t) V(vs3) V(vs4)
	* Desde (s3,s4)=01 a 10
	alterparam c=1
	alterparam d=-1
	reset
	alter V3=1.2
	alter V8=0
	dc V4 0 1.2 0.001
	setplot dc4
	plot vs3 vs4 vo_s2t ylabel vout xlabel vin
	set filetype = ascii
	write dc01to10.raw V(vo_s2t) V(vs3) V(vs4)
	* Desde (s3,s4)=01 a 11
	reset
	alter V3=1.2
	alter V8=1.2
	alter V7=1.2
	dc V4 0 1.2 0.001
	setplot dc5
	plot vs3 vs4 vo_s1t vo_s2t ylabel vout xlabel vin
	set filetype = ascii
	write dc01to11.raw V(vo_s1t) V(vo_s2t) V(vs3) V(vs4)
	* Desde (s3,s4)=10 a 11
	reset
	alter V3=1.2
	alter V8=1.2
	alter V4=1.2
	dc V7 0 1.2 0.001
	setplot dc6
	plot vs3 vs4 vo_s1t ylabel vout xlabel vin ylimit 0 1.2
	set filetype = ascii
	write dc10to11.raw V(vo_s1t) V(vs3) V(vs4)
.endc
.end"}
C {lab_pin.sym} 245 -95 1 0 {name=p21 sig_type=std_logic lab=vo_s2t}
C {lab_pin.sym} 245 65 1 0 {name=p22 sig_type=std_logic lab=vo_s3t}
C {lab_pin.sym} 220 220 1 0 {name=p23 sig_type=std_logic lab=vo_s4t}
C {/foss/designs/Termo_codePI/Circuit_stdcells.sym} 0 0 0 0 {name=x1}
C {lab_pin.sym} 0 120 0 0 {name=p8 sig_type=std_logic lab=avss}
C {lab_pin.sym} 390 -10 2 0 {name=p9 sig_type=std_logic lab=avss}
C {lab_pin.sym} 400 -160 2 0 {name=p10 sig_type=std_logic lab=avss}
C {lab_pin.sym} 400 150 2 0 {name=p11 sig_type=std_logic lab=avss}
C {lab_pin.sym} 400 310 2 0 {name=p12 sig_type=std_logic lab=avss}
C {lab_pin.sym} 325 -150 0 0 {name=p13 sig_type=std_logic lab=avdd}
C {lab_pin.sym} 325 10 0 0 {name=p14 sig_type=std_logic lab=avdd}
C {lab_pin.sym} 325 160 0 0 {name=p15 sig_type=std_logic lab=avdd}
C {/foss/designs/Termo_codePI/inv_prtt.sym} 360 -230 0 0 {name=x2}
C {/foss/designs/Termo_codePI/inv_prtt.sym} 360 -80 0 0 {name=x3}
C {/foss/designs/Termo_codePI/inv_prtt.sym} 360 80 0 0 {name=x4}
C {/foss/designs/Termo_codePI/inv_prtt.sym} 360 230 0 0 {name=x5}
C {lab_pin.sym} 940 -265 1 0 {name=p24 sig_type=std_logic lab=avdd}
C {bsource.sym} 720 245 0 0 {name=B1 VAR=V FUNC="'\{a\}*1.2+\{b\}*V(vs5)'" m=1}
C {vsource.sym} 940 245 0 0 {name=V3 value="DC 0 AC 0" savecurrent=false}
C {lab_pin.sym} 1415 640 2 0 {name=p25 sig_type=std_logic lab=vs4}
C {lab_pin.sym} 940 295 3 0 {name=p26 sig_type=std_logic lab=avss}
C {lab_pin.sym} 1165 185 3 0 {name=p34 sig_type=std_logic lab=vs6}
C {switch_ngspice.sym} 1310 50 3 0 {name=S1 model=SW1
device_model=".MODEL SW1 SW 
+ VT=0.9 VH=0.01
+ RON=0.01 ROFF=10G "}
C {switch_ngspice.sym} 1310 220 1 0 {name=S2 model=SW1
device_model=".MODEL SW1 SW 
+ VT=0.9 VH=0.01
+ RON=0.01 ROFF=10G "}
C {lab_pin.sym} 1395 100 2 0 {name=p27 sig_type=std_logic lab=avss}
C {lab_pin.sym} 1050 165 3 0 {name=p28 sig_type=std_logic lab=vcontrol
}
C {/foss/designs/Termo_codePI/inv_prtt.sym} 1155 -65 0 0 {name=x6}
C {lab_pin.sym} 1155 -130 1 0 {name=p35 sig_type=std_logic lab=avdd}
C {lab_pin.sym} 1155 10 3 0 {name=p36 sig_type=std_logic lab=avss}
C {lab_pin.sym} 720 795 3 0 {name=p31 sig_type=std_logic lab=avss}
C {vsource.sym} 1095 745 0 0 {name=V7 value="DC=\{vdd\} AC 0" savecurrent=false}
C {lab_pin.sym} 1095 795 3 0 {name=p32 sig_type=std_logic lab=avss}
C {bsource.sym} 720 745 0 0 {name=B2 VAR=V FUNC="'\{c\}*1.2+\{d\}*V(vs6)'" m=1}
C {vsource.sym} 940 745 0 0 {name=V8 value="DC 0 AC 0" savecurrent=false}
C {lab_pin.sym} 940 795 3 0 {name=p37 sig_type=std_logic lab=avss}
C {lab_pin.sym} 1165 685 3 0 {name=p38 sig_type=std_logic lab=vs5}
C {switch_ngspice.sym} 1310 550 3 0 {name=S3 model=SW1
device_model=".MODEL SW1 SW 
+ VT=0.9 VH=0.01
+ RON=0.01 ROFF=10G "}
C {switch_ngspice.sym} 1310 720 1 0 {name=S4 model=SW1
device_model=".MODEL SW1 SW 
+ VT=0.9 VH=0.01
+ RON=0.01 ROFF=10G "}
C {lab_pin.sym} 1395 600 2 0 {name=p39 sig_type=std_logic lab=avss}
C {/foss/designs/Termo_codePI/inv_prtt.sym} 1155 435 0 0 {name=x7}
C {lab_pin.sym} 1155 370 1 0 {name=p41 sig_type=std_logic lab=avdd}
C {lab_pin.sym} 1155 510 3 0 {name=p42 sig_type=std_logic lab=avss}
